{"ast":null,"code":"var _jsxFileName = \"/opt/demo/secure-js-api-jwt/src/components/Login.js\";\nimport React, { useState } from \"react\";\nimport { Grid, Typography, TextField, Button } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { updateAppSettings } from \"../util\";\n\nlet base64 = require(\"base-64\");\n\nlet headers = new Headers();\nconst url = \"http://localhost:5000/login\";\nexport const Login = () => {\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(\"\");\n  const history = useHistory();\n\n  const onChangeUsername = username => setUserName(username);\n\n  const onChangePassword = password => setPassword(password);\n\n  const onClickLogin = () => {\n    headers.set(\"Authorization\", \"Basic \" + base64.encode(userName + \":\" + password));\n    fetch(url, {\n      headers: headers,\n      method: \"POST\"\n    }).then(res => res.json()).then(json => {\n      if (json.message) setLoginError(json.message);else {\n        updateAppSettings(json.token);\n        history.push(\"/books\");\n      }\n    }).catch(err => console.log(\"Error logging into app \", err.message));\n  };\n\n  return /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    direction: \"column\",\n    alignItems: \"center\",\n    style: {\n      marginTop: \"10vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    style: {\n      marginBottom: \"10vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, \"Welcome to Bookie!\", /*#__PURE__*/React.createElement(\"span\", {\n    role: \"img\",\n    \"aria-label\": \"books\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, \"\\uD83D\\uDCDA\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    style: {\n      marginBottom: \"5vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"username-input\",\n    label: \"username\",\n    value: userName,\n    onChange: e => onChangeUsername(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    style: {\n      marginBottom: \"7vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"password-input\",\n    label: \"password\",\n    type: \"password\",\n    value: password,\n    onChange: e => onChangePassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    style: {\n      marginBottom: \"7vh\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    \"aria-label\": \"login\",\n    variant: \"contained\",\n    size: \"large\",\n    color: \"primary\",\n    onClick: onClickLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 9\n    }\n  }, \"LOGIN\")), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"body2\",\n    color: \"error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, loginError)));\n};","map":{"version":3,"sources":["/opt/demo/secure-js-api-jwt/src/components/Login.js"],"names":["React","useState","Grid","Typography","TextField","Button","useHistory","updateAppSettings","base64","require","headers","Headers","url","Login","userName","setUserName","password","setPassword","loginError","setLoginError","history","onChangeUsername","username","onChangePassword","onClickLogin","set","encode","fetch","method","then","res","json","message","token","push","catch","err","console","log","marginTop","marginBottom","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Grid, Typography, TextField, Button } from \"@material-ui/core\";\nimport { useHistory } from \"react-router-dom\";\nimport { updateAppSettings } from \"../util\";\nlet base64 = require(\"base-64\");\nlet headers = new Headers();\nconst url = \"http://localhost:5000/login\";\n\nexport const Login = () => {\n  const [userName, setUserName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loginError, setLoginError] = useState(\"\");\n  const history = useHistory();\n\n  const onChangeUsername = (username) => setUserName(username);\n  const onChangePassword = (password) => setPassword(password);\n\n  const onClickLogin = () => {\n    headers.set(\n      \"Authorization\",\n      \"Basic \" + base64.encode(userName + \":\" + password)\n    );\n    fetch(url, { headers: headers, method: \"POST\" })\n      .then((res) => res.json())\n      .then((json) => {\n        if (json.message) setLoginError(json.message);\n        else {\n          updateAppSettings(json.token);\n          history.push(\"/books\");\n        }\n      })\n      .catch((err) => console.log(\"Error logging into app \", err.message));\n  };\n\n  return (\n    <Grid\n      container\n      direction={\"column\"}\n      alignItems={\"center\"}\n      style={{ marginTop: \"10vh\" }}\n    >\n      <Grid item style={{ marginBottom: \"10vh\" }}>\n        <Typography variant={\"h3\"}>\n          Welcome to Bookie!\n          <span role={\"img\"} aria-label={\"books\"}>\n            ðŸ“š\n          </span>\n        </Typography>\n      </Grid>\n      <Grid item style={{ marginBottom: \"5vh\" }}>\n        <TextField\n          id={\"username-input\"}\n          label={\"username\"}\n          value={userName}\n          onChange={(e) => onChangeUsername(e.target.value)}\n        />\n      </Grid>\n      <Grid item style={{ marginBottom: \"7vh\" }}>\n        <TextField\n          id={\"password-input\"}\n          label={\"password\"}\n          type={\"password\"}\n          value={password}\n          onChange={(e) => onChangePassword(e.target.value)}\n        />\n      </Grid>\n      <Grid item style={{ marginBottom: \"7vh\" }}>\n        <Button\n          aria-label={\"login\"}\n          variant={\"contained\"}\n          size={\"large\"}\n          color={\"primary\"}\n          onClick={onClickLogin}\n        >\n          LOGIN\n        </Button>\n      </Grid>\n      <Grid item>\n        <Typography variant={\"body2\"} color={\"error\"}>\n          {loginError}\n        </Typography>\n      </Grid>\n    </Grid>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}